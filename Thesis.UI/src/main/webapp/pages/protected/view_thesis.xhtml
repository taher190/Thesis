<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:thesis="http://java.sun.com/jsf/composite/thesis"
      xmlns:p="http://primefaces.org/ui">
<f:metadata>
    <f:event type="preRenderView" listener="#{viewThesisBean.init}" />
</f:metadata>
<ui:composition template="/template/common/layout.xhtml">
    <ui:define name="head">
        <h:outputScript library="js" name="thesis_viewer.js" />
    </ui:define>
    <ui:define name="content">
        <ui:repeat value="#{viewThesisBean.thesis.studentActivityList}" var="studentActivity">
            <div id="student_activity_#{studentActivity.id}"
                 class="student_activity_item #{studentActivity.loadDocument ? 'student_activity_enable' : 'student_activity_disable'}">
                <p:outputLabel value="#{studentActivity.startDate}">
                    <f:convertDateTime locale="tr" dateStyle="medium" />
                </p:outputLabel>
                -
                <p:outputLabel value="#{studentActivity.endDate}">
                    <f:convertDateTime locale="tr" dateStyle="medium" />
                </p:outputLabel>

                <div id="item_student_activity_#{studentActivity.id}"
                     class="student_activity_detail"
                     style="display: none" >
                    <p:outputLabel rendered="#{studentActivity.loadDocument}">
                        Bu haftaya ait PDF yüklenmiş. İlgili dokümana ulaşabilmek için
                        <a href="#{request.contextPath}/resources/pdf/#{studentActivity.documentName}"
                           target="_blank" >
                            tıklayınız!
                        </a>
                        <br />
                        <br />
                    </p:outputLabel>

                    <p:commandLink value="Yorumları incele"
                                   update=":comments_dialog_form:comments_dialog_"
                                   oncomplete="PF('comments_dialog').show();" />
                    <br />
                    <p:commandLink value="Yüklenen dokümanlar"
                                   update=":file_upload_dialog_form:file_upload_dialog_"
                                   oncomplete="PF('file_upload_dialog').show();" />
                </div>
            </div>
        </ui:repeat>

        <p:remoteCommand name="selectStudentActivity"
                         actionListener="#{viewThesisBean.selectStudentActivity}"
                         process="@this" />
    </ui:define>
</ui:composition>
</html>