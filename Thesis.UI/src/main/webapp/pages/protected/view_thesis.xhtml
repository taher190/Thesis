<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:thesis="http://java.sun.com/jsf/composite/thesis"
      xmlns:p="http://primefaces.org/ui">
<f:metadata>
    <f:event type="preRenderView" listener="#{viewThesisBean.init}" />
</f:metadata>
<ui:composition template="/template/common/layout.xhtml">
    <ui:define name="head">
        <h:outputScript library="js" name="thesis_viewer.js" />
    </ui:define>
    <ui:define name="content">
        <ui:repeat value="#{viewThesisBean.thesis.studentActivityList}" var="studentActivity">
            <div id="student_activity_#{studentActivity.id}"
                 class="student_activity_item #{studentActivity.accepted ? 'student_activity_enable' : 'student_activity_disable'}">
                <p:outputLabel value="#{studentActivity.startDate}">
                    <f:convertDateTime locale="tr" dateStyle="medium" />
                </p:outputLabel>
                -
                <p:outputLabel value="#{studentActivity.endDate}">
                    <f:convertDateTime locale="tr" dateStyle="medium" />
                </p:outputLabel>

                <div id="item_student_activity_#{studentActivity.id}"
                     class="student_activity_detail"
                     style="display: none" >
                    <p:outputLabel rendered="#{studentActivity.documentUrl ne null}">
                        Bu haftaya ait PDF yüklenmiş. İlgili dokümana ulaşabilmek için
                        <a href="#{request.contextPath}/resources/pdf/#{studentActivity.documentUrl}"
                           target="_blank" >
                            tıklayınız!
                        </a>
                        <br />
                        <br />
                    </p:outputLabel>
                    <p:outputLabel value="Haftaya ait doküman kabul edilmiş. "
                                  rendered="#{studentActivity.accepted and not empty studentActivity.documentUrl}" />
                    <p:outputLabel value="Haftaya ait doküman kabul edilmemiş ve değerlendirilmemiş! Tez sorumlusu durumla ilgili yorum bırakmış olabilir. "
                                  rendered="#{!studentActivity.accepted and not empty studentActivity.documentUrl}" />

                    <p:commandLink value="Yorumları incele"
                                   update=":comments_dialog_form:comments_dialog_"
                                   oncomplete="PF('comments_dialog').show();" />
                    <p:outputPanel rendered="#{empty studentActivity.documentUrl}">
                        fsd
                        <ui:remove>
                            <p:fileUpload mode="simple"
                                          value="#{viewThesisBean.file}"
                                          invalidSizeMessage="Yüklenmek istenen dosyanın boyutu çok büyük, 4MB sınırını aşmamalıdır."
                                          sizeLimit="4096" />
                            <br />
                            <p:commandButton actionListener="#{viewThesisBean.uploadDocument}" value="Yükle" ajax="false" />
                        </ui:remove>
                    </p:outputPanel>
                </div>
            </div>
        </ui:repeat>

        <p:remoteCommand name="selectStudentActivity"
                         actionListener="#{viewThesisBean.selectStudentActivity}"
                         process="@this" />
    </ui:define>
</ui:composition>
</html>