<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:form id="file_upload_dialog_form"
        enctype="multipart/form-data"
        rendered="#{view.viewId eq '/pages/protected/view_thesis.xhtml'}">
    <p:dialog widgetVar="file_upload_dialog"
              id="file_upload_dialog_"
              modal="true"
              draggable="false"
              resizable="false"
              header="Dosya yükleme işlemleri"
              footer="Her hafta sadece 1 doküman yüklenebilir."
              width="600">
        <p:fileUpload value="#{viewThesisBean.file}"
                      mode="advanced"
                      fileUploadListener="#{viewThesisBean.fileUploadListener}"
                      invalidSizeMessage="Yüklenmek istenen dosyanın boyutu çok büyük, 4MB sınırını aşmamalıdır."
                      sizeLimit="4000000"
                      fileLimit="1" fileLimitMessage="Sadece 1 dosya yükleyebilirsiniz!"
                      cancelLabel="İptal"
                      uploadLabel="Yükle"
                      label="Seç"
                      oncomplete="location.reload();"
                      allowTypes="/(\.|\/)(pdf)$/"
                      rendered="#{!viewThesisBean.selectedStudentActivity.loadDocument}"
                      invalidFileMessage="Bu dosya türü desteklenmiyor!">
        </p:fileUpload>

        <p:commandLink value="Yüklenen dosyayı sil"
                       actionListener="#{viewThesisBean.deleteDocument}"
                       process="@this"
                       oncomplete="location.reload();"
                       rendered="#{viewThesisBean.selectedStudentActivity.loadDocument}" />
        <p:spacer />
    </p:dialog>
</h:form>
</html>